<h2 mat-dialog-title>Cambia Password</h2>

<div mat-dialog-content>
  <form [formGroup]="form" (ngSubmit)="save()">

    <!-- Old Password -->
    <div class="form-group">
      <label>Password attuale</label>
      <input matInput type="password" formControlName="oldPassword" />
      <div class="error" *ngIf="form.controls['oldPassword'].touched && form.controls['oldPassword'].errors">
        <span *ngIf="form.controls['oldPassword'].hasError('required')">
          La password attuale è obbligatoria
        </span>
        <span *ngIf="form.controls['oldPassword'].hasError('minlength')">
          Deve contenere almeno 8 caratteri
        </span>
      </div>
    </div>

    <!-- New Password -->
    <div class="form-group">
      <label>Nuova password</label>
      <input matInput type="password" formControlName="newPassword" />
      <div class="error" *ngIf="form.controls['newPassword'].touched && form.controls['newPassword'].errors">
        <span *ngIf="form.controls['newPassword'].hasError('required')">
          La nuova password è obbligatoria
        </span>
        <span *ngIf="form.controls['newPassword'].hasError('minlength')">
          Deve contenere almeno 8 caratteri
        </span>
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label>Conferma password</label>
      <input matInput type="password" formControlName="confirmPassword" />
      <div class="error" *ngIf="form.controls['confirmPassword'].touched && form.controls['confirmPassword'].errors">
        <span *ngIf="form.controls['confirmPassword'].hasError('required')">
          La conferma è obbligatoria
        </span>
        <span *ngIf="form.controls['confirmPassword'].hasError('minlength')">
          Deve contenere almeno 8 caratteri
        </span>
      </div>
    </div>

    <!-- Backend error -->
    <div style="color: red; margin: 5px;" *ngIf="changePasswordError">
      {{ changePasswordError }}
    </div>

    <!-- Buttons -->
    <div class="buttons">
      <button mat-button type="button" (click)="close()">Annulla</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">
        Salva
      </button>
    </div>
  </form>
</div>
